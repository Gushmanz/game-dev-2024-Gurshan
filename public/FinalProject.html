<!DOCTYPE html>
<html>
<head>
    <title>Cool 3-Level Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #myImg01, #myImg02, #myImg03 {
            position: absolute;
            width: 80px;
            height: 80px;
        }
        #levelIndicator {
            position: fixed;
            top: 10px;
            left: 10px;
            font-size: 20px;
            background-color: lightyellow;
            padding: 5px;
            border: 1px solid black;
        }
    </style>
</head>
<body id="myBody" style="background-repeat: repeat; background-size: 80%" background="myBackground01.jpg">

<h1 align="center">Cool 3-Level Game</h1>
<div id="levelIndicator">Level: 1</div>

<script>
    // Global variables
    let myGlobalX = 0;
    let myClock;
    let currentLevel = 1;

    // Helper function to detect collision
    function myHitOther(my1, my2) {
        let rect1 = document.getElementById(my1).getBoundingClientRect();
        let rect2 = document.getElementById(my2).getBoundingClientRect();
        return !(
            rect1.right < rect2.left ||
            rect1.left > rect2.right ||
            rect1.bottom < rect2.top ||
            rect1.top > rect2.bottom
        );
    }

    // Function to handle game logic for each level
    function myCheckHit() {
        if (myHitOther('myImg01', 'myImg02')) {
            alert('You reached the goal for this level!');
            nextLevel();
        }
        if (currentLevel > 1 && myHitOther('myImg01', 'myImg03')) {
            alert('You hit an obstacle! Try again.');
            resetLevel();
        }
    }

    // Function to proceed to the next level
    function nextLevel() {
        currentLevel++;
        if (currentLevel > 3) {
            alert('Congratulations! You completed all levels!');
            currentLevel = 1; // Restart the game
        }
        setupLevel();
    }

    // Reset the current level
    function resetLevel() {
        setupLevel();
    }

    // Setup game elements for the current level
    function setupLevel() {
        document.getElementById('levelIndicator').textContent = `Level: ${currentLevel}`;

        let player = document.getElementById('myImg01');
        let goal = document.getElementById('myImg02');
        let obstacle = document.getElementById('myImg03');

        player.style.left = '50px';
        player.style.top = '50px';

        if (currentLevel === 1) {
            goal.style.left = '400px';
            goal.style.top = '50px';
            obstacle.style.display = 'none';
        } else if (currentLevel === 2) {
            goal.style.left = '600px';
            goal.style.top = '200px';
            obstacle.style.left = '300px';
            obstacle.style.top = '150px';
            obstacle.style.display = 'block';
        } else if (currentLevel === 3) {
            goal.style.left = '700px';
            goal.style.top = '300px';
            obstacle.style.left = '400px';
            obstacle.style.top = '250px';
            obstacle.style.display = 'block';
        }
    }

    // Initial setup
    setupLevel();
</script>

<img id="myImg01" src="myImage01.jpg">
<img id="myImg02" src="myImage02.jpg">
<img id="myImg03" src="myImage03.jpg" style="display: none;">

<br><br>
<input type="button" value="Move Right" onclick="{
    let player = document.getElementById('myImg01');
    player.style.left = parseInt(player.style.left) + 20 + 'px';
    myCheckHit();
}">
<input type="button" value="Move Down" onclick="{
    let player = document.getElementById('myImg01');
    player.style.top = parseInt(player.style.top) + 20 + 'px';
    myCheckHit();
}">

</body>
</html>
